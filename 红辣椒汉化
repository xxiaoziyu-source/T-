local Translations = {
    ["Steal a Brainot"] = "红辣椒汉化",
    ["Chilli Hub"] = "○○汉化",
    ["隐形斗篷"] = "商店选中物品",
    ["Auto Buy Item"] = "自动购买物品开关",
    ["Farm"] = "农场功能设置",
    ["Min money per sec to buy"] = "每秒最低购买金额档位选择",
    ["Auto buy Brainrot"] = "自动购买脑红开关",
    ["Buy Brainrot"] = "购买脑红",
    ["Anti AFK"] = "防挂机开关",
    ["Auto Lock Base"] = "自动锁基地开关",
    ["Auto Collect"] = "自动收集开关",
    ["Collect Delay (minutes)"] = "收集延迟（分钟）设置",
    ["Invisible (V keybind)"] = "隐形功能（需7次重生）",
    ["Steal Upstairs (Y keybind)"] = "上楼偷窃功能（Y键绑定）",
    ["Auto Steal"] = "自动偷窃开关",
    ["Auto Steal Nearest Brainrot"] = "自动偷窃最近脑红开关",
    ["Auto kick on steal"] = "偷窃时自动踢出开关",
    ["Float (Patched)"] = "漂浮功能（已修复，需7次重生，C键绑定）",
    ["Laser Steal (Patched)"] = "激光偷窃功能（已修复）",
    ["Aimbot"] = "自动瞄准开关",
    ["Highest Value Brainrot ESP"] = "高价值脑红显示开关",
    ["Timer ESP"] = "计时器显示开关",
    ["Player ESP"] = "玩家显示开关",
    ["Auto Load Script"] = "自动加载脚本开关",
    ["Start server hop to find target"] = "服务器跳转寻找目标开关",
    ["WebHook URL"] = "WebHook地址输入",
    ["Find High Value Brainrot Server"] = "查找高价值脑红服务器开关",
    ["Find < 2 min Guaranteed Mythic Server"] = "查找＜2分钟必出神话级服务器开关",
    ["Min money per sec to find"] = "每秒最低查找金额设置",
    ["Server Hop"] = "服务器跳转功能",
    ["Job-ID Input"] = "作业ID输入",
    ["Join Job-ID"] = "加入作业ID功能",
    ["Copy Job-ID"] = "复制作业ID功能",
    ["Reduce Graphics"] = "降低画质开关",
    ["Discord Link (Click to copy)"] = "Discord链接复制功能",
    ["Rejoin & Auto Load Script"] = "重连并自动加载脚本功能",
    ["Select Item to Buy"] = "选择要购买的物品",
    ["Shop"] = "商店",
    ["Main"] = "主分类",
    ["Stealer"] = "窃取者分类",
    ["Helper"] = "辅助者分类",
    ["Player"] = "玩家分类",
    ["Finder"] = "寻找者分类",
    ["Server"] = "服务器分类",
    ["Discord"] = "Discord分类",
    ["Emerald Slap"] = "绿宝石拍击",
    ["Boogie Bomb"] = "布吉炸弹",
    ["Slap"] = "拍击",
    ["Taser Gun"] = "电击枪",
    ["Rage Table"] = "愤怒桌",
    ["Bee Launcher"] = "蜜蜂发射器",
    ["Gold Slap"] = "黄金拍击",
    ["Rainbowrath Sword"] = "彩虹之怒剑",
    ["Grapple Hook"] = "抓钩",
    ["Galaxy Slap"] = "银河拍击",
    ["Laser Cape"] = "激光斗篷",
    ["Flame Slap"] = "火焰拍击",
    ["Paintball Gun"] = "彩弹枪",
    ["Ruby Slap"] = "红宝石拍击",
    ["Medusa's Head"] = "美杜莎之头",
    ["Splatter Slap"] = "泼溅拍击",
    ["Gravity Coil"] = "重力线圈",
    ["Invisibility Cloak"] = "隐形斗篷",
    ["Speed Coil"] = "速度线圈",
    ["Nuclear Slap"] = "核拍击",
    ["Quantum Cloner"] = "量子克隆器",
    ["Trap"] = "陷阱",
    ["Glitched Slap"] = "故障拍击",
    ["Diamond Slap"] = "钻石拍击",
    ["All Seeing Sentry"] = "全视哨兵",
    ["Web Slinger"] = "织网者",
    ["Dark Matter Slap"] = "暗物质拍击",
    ["Body Swap Potion"] = "身体互换药剂",
    ["Coil Combo"] = "线圈组合",
    ["Steal Settings"] = "偷窃设置",
    ["Desync (Need 7 rebirths)\nV keybind"] = "Desync（需7次重生）\n按键绑定V",
    ["Steal Upstairs\nY keybind"] = "上楼偷窃\n按键绑定Y",
    ["Player Settings"] = "玩家设置",
    ["Anti Ragdoll"] = "防布娃娃",
    ["Speed Boost"] = "速度提升",
    ["Infinity Jump"] = "无限跳跃",
    ["Chilli Booster (UI Visible)"] = "辣椒增强器（UI可见）",
    ["Laser Steal"] = "激光偷窃",
    ["Desync"] = "Desync（需7次重生，按键绑定V）",
    ["Chilli Float"] = "辣椒漂浮",
    ["Works best on low-ping servers (<120)"] = "在低延迟服务器（延迟＜120）上运行效果最佳",
    ["Join my Discord分类 to join secret servers 100% within 1 min"] = "加入我的Discord分类以在1分钟内100%加入秘密服务器",
    ["Secret giveaway happening now on my Discord分类"] = "我的Discord分类频道正在进行秘密赠品活动",
    ["Discord分类 & Notes"] = "Discord分类 & 说明",
    ["Rejoin current server and auto-run script at teleport"] = "重连当前服务器并在传送时自动运行脚本"
}

local function translateText(text)
    if not text or type(text) ~= "string" then return text end
    
    if Translations[text] then
        return Translations[text]
    end
    
    for en, cn in pairs(Translations) do
        if text:find(en) then
            return text:gsub(en, cn)
        end
    end
    
    return text
end

local function setupTranslationEngine()
    local success, err = pcall(function()
        local oldIndex = getrawmetatable(game).__newindex
        setreadonly(getrawmetatable(game), false)
        
        getrawmetatable(game).__newindex = newcclosure(function(t, k, v)
            if (t:IsA("TextLabel") or t:IsA("TextButton") or t:IsA("TextBox")) and k == "Text" then
                v = translateText(tostring(v))
            end
            return oldIndex(t, k, v)
        end)
        
        setreadonly(getrawmetatable(game), true)
    end)
    
    if not success then
        warn("元表劫持失败:", err)
       
        local translated = {}
        local function scanAndTranslate()
            for _, gui in ipairs(game:GetService("CoreGui"):GetDescendants()) do
                if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                    pcall(function()
                        local text = gui.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                gui.Text = translatedText
                                translated[gui] = true
                            end
                        end
                    end)
                end
            end
            
            local player = game:GetService("Players").LocalPlayer
            if player and player:FindFirstChild("PlayerGui") then
                for _, gui in ipairs(player.PlayerGui:GetDescendants()) do
                    if (gui:IsA("TextLabel") or gui:IsA("TextButton") or gui:IsA("TextBox")) and not translated[gui] then
                        pcall(function()
                            local text = gui.Text
                            if text and text ~= "" then
                                local translatedText = translateText(text)
                                if translatedText ~= text then
                                    gui.Text = translatedText
                                    translated[gui] = true
                                end
                            end
                        end)
                    end
                end
            end
        end
        
        local function setupDescendantListener(parent)
            parent.DescendantAdded:Connect(function(descendant)
                if descendant:IsA("TextLabel") or descendant:IsA("TextButton") or descendant:IsA("TextBox") then
                    task.wait(0.1)
                    pcall(function()
                        local text = descendant.Text
                        if text and text ~= "" then
                            local translatedText = translateText(text)
                            if translatedText ~= text then
                                descendant.Text = translatedText
                            end
                        end
                    end)
                end
            end)
        end
        
        pcall(setupDescendantListener, game:GetService("CoreGui"))
        local player = game:GetService("Players").LocalPlayer
        if player and player:FindFirstChild("PlayerGui") then
            pcall(setupDescendantListener, player.PlayerGui)
        end
        
        while true do
            scanAndTranslate()
            task.wait(3)
        end
    end
end

task.wait(2)

setupTranslationEngine()

local success, err = pcall(function()
--这下面填加载外部脚本
loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"))()

end)

if not success then
    warn("加载失败:", err)
end
